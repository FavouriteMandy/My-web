<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ultimate Daily Planner</title>
<!-- Google Fonts for a modern look -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
<style>
  /* Reset & Base Styles */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #ece9e6, #ffffff);
    color: #333;
  }

  /* Header */
  header {
    background-color: #2C3E50;
    padding: 25px 40px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: #fff;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  header h1 {
    font-weight: 600;
    font-size: 1.8em;
  }

  /* Main container */
  .container {
    max-width: 1200px;
    margin: 30px auto;
    padding: 0 20px;
  }

  /* Summary Cards (optional) */
  .summary {
    display: flex;
    justify-content: space-around;
    margin-bottom: 40px;
    flex-wrap: wrap;
  }

  .card {
    background: #fff;
    padding: 20px;
    flex: 1 1 200px;
    margin: 10px;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.15);
  }

  .card h3 {
    margin-top: 0;
    font-size: 1.2em;
    color: #34495e;
  }

  .card p {
    font-size: 1.4em;
    margin: 10px 0;
  }

  /* Add Task Button */
  #add-task-btn {
    display: inline-block;
    background-color: #2980b9;
    color: #fff;
    padding: 14px 28px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 1em;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: background 0.3s, transform 0.2s;
  }
  #add-task-btn:hover {
    background-color: #3498db;
    transform: translateY(-2px);
  }

  /* Schedule Layout */
  .schedule {
    display: grid;
    grid-template-columns: 1fr 3fr 1fr;
    gap: 15px;
    margin-top: 30px;
  }

  /* Time Labels */
  .time-label {
    font-weight: 600;
    font-size: 1em;
    text-align: right;
    padding-right: 15px;
    color: #2c3e50;
  }

  /* Task Blocks */
  .task-block {
    position: relative;
    background: #fff;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transition: box-shadow 0.2s, background-color 0.2s;
    display: flex;
    align-items: center;
  }

  .task-input {
    width: 100%;
    padding: 10px 15px;
    font-size: 1em;
    border: none;
    border-radius: 8px;
    outline: none;
    transition: background-color 0.2s;
  }

  /* Buttons */
  .task-buttons {
    display: flex;
    gap: 10px;
    margin-left: 15px;
  }

  .btn {
    padding: 10px 14px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.95em;
    transition: background-color 0.3s, transform 0.2s;
  }

  .btn.save {
    background-color: #27ae60;
    color: #fff;
  }
  .btn.save:hover {
    background-color: #2ecc71;
    transform: translateY(-1px);
  }

  .btn.delete {
    background-color: #c0392b;
    color: #fff;
  }
  .btn.delete:hover {
    background-color: #e74c3c;
    transform: translateY(-1px);
  }

  /* Color coding for time blocks based on current time */
  .past {
    background-color: #f0f0f0;
  }
  .present {
    background-color: #ffe0b2;
  }
  .future {
    background-color: #d0f0c0;
  }

  /* Modal Styles for adding tasks */
  .modal {
    display: none; 
    position: fixed; 
    z-index: 1000; 
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    align-items: center; 
    justify-content: center;
    padding: 20px;
  }

  .modal-content {
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    max-width: 500px;
    width: 100%;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    position: relative;
    animation: slideDown 0.3s ease;
  }

  @keyframes slideDown {
    from {transform: translateY(-50px); opacity: 0;}
    to {transform: translateY(0); opacity: 1;}
  }

  .close-btn {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 1.5em;
    cursor: pointer;
    color: #999;
    transition: color 0.2s;
  }
  .close-btn:hover {
    color: #333;
  }

  /* Form styles inside modal */
  .modal form {
    display: flex;
    flex-direction: column;
  }

  .modal input {
    padding: 12px 15px;
    margin-top: 10px;
    margin-bottom: 20px;
    font-size: 1em;
    border: 1px solid #ccc;
    border-radius: 8px;
    outline: none;
    transition: border-color 0.2s;
  }

  .modal input:focus {
    border-color: #2980b9;
  }

  /* Submit button inside modal */
  .modal button.submit {
    padding: 14px;
    background-color: #2980b9;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.3s;
  }
  .modal button.submit:hover {
    background-color: #3498db;
  }

  /* Responsive adjustments */
  @media(max-width: 768px){
    .summary {
      flex-direction: column;
      align-items: center;
    }
    .card {
      width: 90%;
      margin: 10px 0;
    }
    .schedule {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>

<header>
  <h1 style="margin-left: 40px;">Ultimate Daily Planner</h1>
</header>

<div class="container">
  <!-- Optional summary cards (can be customized or removed) -->
  <!--
  <div class="summary">
    <div class="card"><h3>Total Tasks</h3><p id="total-tasks">0</p></div>
    <div class="card"><h3>Completed</h3><p id="completed-tasks">0</p></div>
  </div>
  -->
  
  <button id="add-task-btn">+ Add New Task</button>

  <!-- Schedule Grid -->
  <div class="schedule" id="schedule">
    <!-- Time blocks will be generated here -->
  </div>
</div>

<!-- Modal for adding/editing tasks -->
<div class="modal" id="taskModal">
  <div class="modal-content">
    <div class="close-btn" id="closeModal">&times;</div>
    <h2 style="margin-bottom:20px;">Add New Task</h2>
    <form id="taskForm">
      <label for="taskTime">Time:</label>
      <input type="time" id="taskTime" required />

      <label for="taskDescription">Task Description:</label>
      <input type="text" id="taskDescription" placeholder="Describe your task..." required />

      <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px;">
        <button type="button" class="btn delete" id="deleteTaskBtn" style="flex:1;">Delete</button>
        <button type="submit" class="btn save" style="flex:1;">Save</button>
      </div>
    </form>
  </div>
</div>

<script>
  const scheduleContainer = document.getElementById('schedule');
  const modal = document.getElementById('taskModal');
  const closeModalBtn = document.getElementById('closeModal');
  const taskForm = document.getElementById('taskForm');
  const deleteBtn = document.getElementById('deleteTaskBtn');
  const addTaskBtn = document.getElementById('add-task-btn');

  // Define working hours
  const hours = [
    { display: '08:00', value: '08:00' },
    { display: '09:00', value: '09:00' },
    { display: '10:00', value: '10:00' },
    { display: '11:00', value: '11:00' },
    { display: '12:00', value: '12:00' },
    { display: '13:00', value: '13:00' },
    { display: '14:00', value: '14:00' },
    { display: '15:00', value: '15:00' },
    { display: '16:00', value: '16:00' },
    { display: '17:00', value: '17:00' },
    { display: '18:00', value: '18:00' }
  ];

  // Load tasks from localStorage
  let tasks = JSON.parse(localStorage.getItem('dailyTasks')) || {};

  let editingTask = null; // To keep track of task being edited

  // Generate schedule
  function generateSchedule() {
    scheduleContainer.innerHTML = '';
    const now = new Date();
    const currentHour = now.getHours();

    hours.forEach(hour => {
      const taskKey = hour.value;
      const taskData = tasks[taskKey] || {};

      const timeBlock = document.createElement('div');
      timeBlock.className = 'task-block';

      // Determine color class based on current time
      const blockHour = parseInt(hour.value);
      if (blockHour < currentHour) {
        timeBlock.classList.add('past');
      } else if (blockHour === currentHour) {
        timeBlock.classList.add('present');
      } else {
        timeBlock.classList.add('future');
      }

      // Time label
      const timeLabel = document.createElement('div');
      timeLabel.style.width = '80px';
      timeLabel.style.fontWeight = '600';
      timeLabel.innerText = hour.display;

      // Task description
      const taskDesc = document.createElement('div');
      taskDesc.style.flex = '1';
      taskDesc.innerText = taskData.description || 'No task added.';
      taskDesc.style.cursor = 'pointer';

      // Clicking opens modal for editing
      taskDesc.onclick = () => {
        openModal(hour.value);
      };

      timeBlock.appendChild(timeLabel);
      timeBlock.appendChild(taskDesc);

      scheduleContainer.appendChild(timeBlock);
    });
  }

  // Open modal to add/edit task
  function openModal(time) {
    editingTask = time;
    const taskData = tasks[time] || {};
    document.getElementById('taskTime').value = time;
    document.getElementById('taskDescription').value = taskData.description || '';
    // Show delete button only if editing existing task
    document.getElementById('deleteTaskBtn').style.display = taskData.description ? 'inline-block' : 'none';
    modal.style.display = 'flex';
  }

  // Close modal
  document.getElementById('closeModal').onclick = () => {
    modal.style.display = 'none';
    editingTask = null;
  };
  window.onclick = (e) => {
    if (e.target === modal) {
      modal.style.display = 'none';
      editingTask = null;
    }
  };

  // Handle form submission
  taskForm.onsubmit = (e) => {
    e.preventDefault();
    const time = document.getElementById('taskTime').value;
    const desc = document.getElementById('taskDescription').value.trim();
    if (desc) {
      tasks[time] = { description: desc };
    } else {
      delete tasks[time];
    }
    saveTasks();
    generateSchedule();
    modal.style.display = 'none';
  };

  // Handle delete button
  document.getElementById('deleteTaskBtn').onclick = () => {
    if (editingTask) {
      delete tasks[editingTask];
      saveTasks();
      generateSchedule();
      modal.style.display = 'none';
    }
  };

  // Add new task button
document.getElementById('add-task-btn').onclick = () => {
  openModal('09:00'); // Default time for new task
  document.getElementById('taskDescription').value = '';
  document.getElementById('deleteTaskBtn').style.display = 'none';
};

  // Save tasks to localStorage
  function saveTasks() {
    localStorage.setItem('dailyTasks', JSON.stringify(tasks));
  }

  // Initialize schedule
  generateSchedule();

  // Optional: Refresh colors every minute
  setInterval(() => {
    generateSchedule();
  }, 60000);
</script>
</body>
</html>